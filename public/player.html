<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>BeatSync — Player</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    .fade-in { animation: fadeIn .28s ease both; }
    @keyframes fadeIn { from {opacity:0; transform: translateY(6px)} to {opacity:1; transform:none} }
    /* make the chat input stand out on mobile */
    #chatFull .chat-footer { box-shadow: 0 -6px 18px rgba(2,6,23,0.6); }

    /* Chat bubble styles */
    .chat-bubble {
      max-width: 78%;
      padding: 10px 12px;
      border-radius: 16px;
      line-height: 1.15;
    }
    .chat-left { background: rgba(255,255,255,0.06); color: #E6EEF6; border-top-left-radius:4px; }
    .chat-right { background: #4F46E5; color: white; border-top-right-radius:4px; margin-left: auto; }
  </style>
</head>
<body class="min-h-screen bg-gradient-to-b from-slate-900 to-black text-slate-100">
  <div class="max-w-5xl mx-auto p-4">

    <header class="flex items-center justify-between mb-4">
      <div>
        <div class="text-2xl font-bold">BeatSync</div>
        <div class="text-sm text-slate-500">Room <span id="roomBadge" class="font-mono">—</span> · <span id="roleBadge">—</span></div>
      </div>

      <div class="flex items-center gap-3">
        <div id="onlineCount" class="text-sm text-slate-400">0 online</div>
        <button id="btnLeave" class="px-3 py-1 rounded-md bg-slate-800">Leave</button>
      </div>
    </header>

    <!-- search bar moved to top (page-wide) -->
    <div id="searchWrapper" class="mb-4">
      <div class="bg-slate-900 rounded-xl p-3 flex gap-3 items-center">
        <input id="searchPro" placeholder="Search YouTube (Indian music) ..." class="flex-1 rounded-full bg-slate-800 px-4 py-2 outline-none" />
        <button id="btnSearch" class="px-4 py-2 rounded-full bg-indigo-600">Search</button>
      </div>
    </div>
<!-- search results (right column) -->
      <aside>
        <div class="bg-slate-900 rounded-2xl p-4 mb-4">
          <div id="resultsBox" class="space-y-2 max-h-96 overflow-auto"></div>
        </div>

        <div id="chatMini" class="bg-slate-900 rounded-2xl p-4 hidden">
          <div id="miniChat" class="text-sm text-slate-400">Switch to Chat tab for full chat.</div>
        </div>
      </aside>
    <main id="mainGrid" class="grid grid-cols-1 md:grid-cols-3 gap-6">
      <!-- Player & playlist -->
      
            </div>

            <!-- minimal host indicator area -->
        
          <div class="mt-4">
            <!-- YouTube iframe container -->
            <div id="ytPlayer" class="w-full h-56 bg-black rounded-md overflow-hidden"></div>

            <div class="mt-3 flex items-center gap-3">
              <!-- Minimal playback controls (visible only to host) -->

                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="bg-slate-900 rounded-2xl p-3 mt-4">
          <div class="flex items-center justify-between mb-2">
            <div class="font-semibold">Playlist</div>
            <div class="text-xs text-slate-400">Auto play order</div>
          </div>
          <div id="playlistBox" class="space-y-2 max-h-96 overflow-auto"></div>
        </div>
      </section>

      

      <!-- full-screen chat -->
      <section id="chatFull" class="col-span-full hidden">
        <div class="bg-slate-900 rounded-2xl p-4 h-[70vh] flex flex-col">
          <div id="chatWindow" class="flex-1 overflow-auto space-y-3 pb-3"></div>

          <!-- chat footer always visible in chatFull -->
          <div class="chat-footer mt-3 flex items-center gap-3">
            <input id="msgInput" type="text" placeholder="Message..." class="flex-1 rounded-full bg-slate-800 px-4 py-3" />
            <button id="btnSend" class="w-12 h-12 rounded-full bg-indigo-600 flex items-center justify-center text-white">
              <!-- send icon -->
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M22 2L11 13"></path>
                <path d="M22 2L15 22L11 13L2 9L22 2Z" />
              </svg>
            </button>
          </div>
        </div>
      </section>
    </main>

    <nav class="fixed bottom-6 left-1/2 transform -translate-x-1/2 bg-black/60 border border-slate-800 rounded-full px-3 py-2 flex gap-2 shadow-lg">
      <button id="musicTabBtn" class="px-4 py-1 rounded-full bg-slate-800 text-slate-100">Music</button>
      <button id="chatTabBtn" class="px-4 py-1 rounded-full text-slate-400">Chat</button>
    </nav>
  </div>

  <script src="/socket.io/socket.io.js"></script>
  <script src="https://www.youtube.com/iframe_api"></script>
  <script src="player.js"></script>
</body>
</html>
