<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>BeatSync — Player</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    /* subtle custom animations */
    .fade-in { animation: fadeIn .35s ease both; }
    @keyframes fadeIn { from {opacity:0; transform: translateY(6px)} to {opacity:1; transform:none} }
  </style>
</head>
<body class="min-h-screen bg-gradient-to-b from-slate-900 to-black text-slate-100">
  <div class="max-w-5xl mx-auto p-4">

    <!-- top: room info + small controls -->
    <header class="flex items-center justify-between mb-4">
      <div>
        <div class="text-2xl font-bold">BeatSync</div>
        <div class="text-sm text-slate-500">Room <span id="roomBadge" class="font-mono">—</span> · <span id="roleBadge">—</span></div>
      </div>

      <div class="flex items-center gap-3">
        <div id="onlineCount" class="text-sm text-slate-400">0 online</div>
        <button id="btnLeave" class="px-3 py-1 rounded-md bg-slate-800">Leave</button>
      </div>
    </header>

    <main id="mainGrid" class="grid grid-cols-1 md:grid-cols-3 gap-6">
      <!-- Player area (big) -->
      <section class="md:col-span-2">
        <div class="bg-slate-800 rounded-2xl p-5 mb-4 fade-in">
          <!-- big player -->
          <div class="flex items-center gap-4">
            <div id="cover" class="w-28 h-28 bg-slate-700 rounded-lg flex items-center justify-center text-4xl">♪</div>
            <div class="flex-1">
              <div id="title" class="text-xl font-semibold">No track</div>
              <div id="artist" class="text-sm text-slate-400">—</div>

              <div class="mt-4">
                <input id="seek" type="range" min="0" max="100" value="0" class="w-full" />
                <div class="flex justify-between text-xs text-slate-400 mt-1">
                  <span id="curT">00:00</span>
                  <span id="durT">00:00</span>
                </div>
              </div>
            </div>

            <div class="flex flex-col items-center gap-2">
              <div class="flex items-center gap-2">
                <button id="prev" class="px-3 py-2 rounded-md bg-slate-700">⏮</button>
                <button id="playBig" class="w-14 h-14 rounded-full bg-white text-black flex items-center justify-center text-xl shadow">▶</button>
                <button id="next" class="px-3 py-2 rounded-md bg-slate-700">⏭</button>
              </div>
              <div class="mt-2 text-sm text-slate-400">Host controls only</div>
            </div>
          </div>
        </div>

        <!-- playlist -->
        <div class="bg-slate-900 rounded-2xl p-3">
          <div class="flex items-center justify-between mb-2">
            <div class="font-semibold">Playlist</div>
            <div class="text-xs text-slate-400">Auto play order</div>
          </div>
          <div id="playlistBox" class="space-y-2 max-h-96 overflow-auto"></div>
        </div>
      </section>

      <!-- right: search/results + chat toggle -->
      <aside>
        <div class="bg-slate-900 rounded-2xl p-4 mb-4">
          <div class="flex items-center gap-2 mb-3">
            <input id="searchPro" placeholder="Search (Jamendo) ..." class="flex-1 rounded-full bg-slate-800 px-3 py-2 outline-none" />
            <button id="btnSearch" class="px-3 py-2 rounded-full bg-indigo-600">Search</button>
          </div>
          <div id="resultsBox" class="space-y-2 max-h-72 overflow-auto"></div>
        </div>

        <div id="chatPanel" class="bg-slate-900 rounded-2xl p-4 hidden">
          <!-- full-screen chat is a separate view (player hidden). This mini panel is optional -->
          <div id="miniChat" class="text-sm text-slate-400">Switch to Chat tab for full chat.</div>
        </div>
      </aside>

      <!-- full-screen chat area (hidden by default) -->
      <section id="chatFull" class="col-span-full hidden">
        <div class="bg-slate-900 rounded-2xl p-4 h-[70vh] flex flex-col">
          <div id="chatWindow" class="flex-1 overflow-auto space-y-3 pb-3"></div>

          <div class="mt-3 flex items-center gap-3">
            <input id="msgInput" type="text" placeholder="Message..." class="flex-1 rounded-full bg-slate-800 px-4 py-2" />
            <button id="btnSend" class="w-12 h-12 rounded-full bg-indigo-600 flex items-center justify-center text-white">
              <!-- send icon -->
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M22 2L11 13"></path>
                <path d="M22 2L15 22L11 13L2 9L22 2Z" />
              </svg>
            </button>
          </div>
        </div>
      </section>
    </main>

    <!-- bottom nav: tabs -->
    <nav class="fixed bottom-6 left-1/2 transform -translate-x-1/2 bg-black/60 border border-slate-800 rounded-full px-3 py-2 flex gap-2 shadow-lg">
      <button id="musicTabBtn" class="px-4 py-1 rounded-full bg-slate-800 text-slate-100">Music</button>
      <button id="chatTabBtn" class="px-4 py-1 rounded-full text-slate-400">Chat</button>
    </nav>
  </div>

  <script src="/socket.io/socket.io.js"></script>
  <script src="player.js"></script>
</body>
</html>
